---
layout: post
title: 스케쥴링
subtitle: 스케쥴링 목적, 스케쥴링 종류
# cover-img: /assets/img/path.jpg
# thumbnail-img: /assets/img/thumb.png
# share-img: /assets/img/path.jpg
tags: [운영체제]
comments: true
categories: cs
---
스케줄링의 목적은 멀티 프로세서 환경에서 모든 프로세스를 공평하게 실행하는 것이다. CPU의 자원은 한정적이기 때문에 스케쥴링을 통해서 효율적으로 활용해야 한다.

## 스케쥴링의 5가지 목적

- **공평성** : 모든 프로세스가 공평하게 실행되어야 한다. 실행되지 않은 프로세스가 없도록 한다.
- **효율성** : 자원을 효율적으로 사용해 자원이 사용되지 않은 시간이 없도록 한다.
- **안정성** : 우선순위를 고려해 높은 우선순위의 프로세스를 먼저 처리하도록 스케쥴링한다.
- **반응 시간 보장** : 프로세스가 일정 시간 내에 응답할 수 있도록 한다.
- **무한 연기 방지** : 특정 프로세스에 대한 처리가 무한 연기 되지 않도록 한다.

## 스케쥴링의 단계

- **장기 스케쥴링** : 준비 큐에 어떤 프로세를 넣을 지 결정해 메모리에 올라가는 프로세스 수를 조절한다. 잡 스케줄링 또는 승인 스케줄링이라고도 한다.
- **중기 스케쥴링** : 메모리에 로드된 프로세스 수를 동적으로 조절한다. 메모리에 프로세스가 많이 로드되면 스왑 아웃해서 일부 프로세스를 통째로 저장한다. 스왑 아웃된 프로세스는 중단 상태가 된다. 중단 상태는 **‘중단된 준비 상태’**, **‘중단된 대기 상태’**로 구분된다.
- **단기 스케줄링** : 준비 큐에 있는 대기 상태 프로세스 중 어떤 프로세스를 다음으로 실행할지 스케줄링 알고리즘으로 결정한다. 디스패치를 결정하는 것인데 이를 CPU 스케줄링이라고도 한다.

## 스케줄링 알고리즘

스케줄링 알고리즘은 준비 큐에 있는 프로세스들 중 어떤 프로세스를 실행할지 결정하는 알고리즘이다. 다음과 같은 기준으로 우선순위를 판단할 수 있다.

- **CPU 사용률** : CPU를 놀리지 않고 사용하는지 판단
- **처리량** : 단위 시간당 실행한 프로세스 수
- **응답 시간** : 프로세스에 요청이 발생했을 때 응답까지 걸리는 시간
- **반환 시간** : 프로세스가 로드된 이후부터 종료될 때까지 걸리는 시간
- **대기 시간** : 프로세스가 대기 큐에서 대기하는 시간의 종합

## 스케쥴링 종류

### 비선점형 스케쥴링

비선점형 스케쥴링은 다른 프로세스가 실행 중인 프로세스가 있을 때 중간에 가로채지 못하는 방식을 뜻한다. 즉, 실행중인 프로세스가 있으면 끝날때까지 대기해야한다.

- **FCFS 스케쥴링** : 준비 큐에 먼저 들어온 프로세스가 먼저 실행된다.
- **SJF 스케줄링** : 실행 시간이 짧은 프로세스가 우선순위를 갖는 알고리즘. 준비 큐에 있는 프로세스 중 CPU를 점유하는 시간이 짧은 프로세스를 먼저 실행해서 실행 시간이 긴 프로세스는 실행이 안되는 기아 상태가 될 수 있다.

이외에도 HRRN 스케줄링이 있다.

### 선점형 스케쥴링

비선점형에 반대 개념이다. 실행 중인 프로세스가 있어도 알고리즘에 따라 실행 조건이 충족되면 선점하여 실행하는 방식이다.

- **RR 스케쥴링** : 비선점형 스케쥴링과 달리 프로세스 간 우선순위가 없다. 모든 프로세스를 순서대로 일정 시간 동아 나눠서 실행한다. 일정 시간을 초과하면 다른 프로세스를 실행하는 것이다. 일정 시간은 **타임 퀀텀(Time Quantum)** 또는 **타임 슬라이스(Time slice)**라고도 한다.
    - 일반적인 시간 단위는 10~100 밀리초다.
    - 특징은 컨텍스트 스위칭이 자주 일어나 오버헤드가 크다.
    - 응답 속도가 빠르다.
- **SRTF 스케쥴링** : 준비 큐에서 대기 시간이 가장 짧게 남은 프로세스를 실행한다. 준비 큐에 실행시간이 더 짧은 프로세스가 들어오면 우선 순위를 갖는다.
- **멀티 레벨 스케쥴링** : 준비 큐를 목적에 따라 여러 개로 분리해 사용하는 알고리즘이다. 분리된 큐는 각각 우선 순위 알고리즘을 갖는다.
    - foreground 큐, background 큐가 있으며 foreground 큐는 응답 속도가 중요한 프로세스가 들어가고, background 큐는 성능이 우선시 되는 프로세스가 들어간다.


### 스케쥴링 문제

| 이름 | 준비 큐에 들어온 시간 | 실행 시간 |
| --- | --- | --- |
| P1 | 0 | 100 |
| P2 | 10 | 10 |
| P3 | 100 | 50 |
| P4 | 60 | 60 |

**FCFS 스케쥴링**

- 순서 : P1 → P2 → P4 → P3
- 평균 대기 시간 : (0 + (100 - 10) + (110 - 60) + (170 - 100)) / 4 = 170 / 4 = 52.5

<br/>
**SJF 스케줄링**

- 순서 : P1 → P2 → P3 → P4
- 평균 대기 시간 : {0 + (100 - 10) + (110 - 100) + (160 - 60)} / 4 = 50

<br/>
**RR 스케줄링**
RR 스케쥴링에서 어떤 프로세스가 응답 요청이 들어왔을 때 기다리는 최대시간은

(전체 프로세스) - 1 * (시간 단위)이다.  시간 단위가 50이라 했을 때

**→ (4 - 1) * 50 = 150**

<br/>
**SRTF 스케줄링**

- 순서 : P1 → P2 → P1 → P3 → P4
- 평균 대기 시간 : {(20 - 10) + (10 - 10) + (110 - 100) + (150 - 60) / 4 = 110 / 4 = 27.5

---
### 출처
기술 면접 대기 CS 전공 핵심요약집 (책)
